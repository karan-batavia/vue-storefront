---
title: How it works?
layout: default
navigation:
  icon: tabler:number-2-small
---

# Deployment - How it works?

This guide explains how Alokai handles store deployment and what configuration is needed to successfully deploy your stores. Understanding the deployment process is crucial for managing multiple stores effectively in production.

**What You'll Learn**

::list{type="success"}
- Understanding the role of `alokai.config.json` in deployment
- Configuring project names and their impact on deployment
- Setting up regions for deployment
- Managing framework selection for different stores
- Running test deployments locally
::

## Core Concepts

### The alokai.config.json File

The `alokai.config.json` file is the central configuration file that controls how your stores are deployed. It contains essential settings for:
- Project identification
- Deployment regions
- Framework selection
- Store-specific configurations

Example configuration:
```json
{
  "stores": {
    "fashion-brand": {
      "projectName": "fashion-brand-prod",
      "region": "us-east-1",
      "framework": "next"
    },
    "sports-brand": {
      "projectName": "sports-brand-prod",
      "region": "eu-west-1",
      "framework": "nuxt"
    }
  }
}
```

::warning Configuration Required
Each deployable store must have a valid configuration in `alokai.config.json`. Template stores don't require configuration as they are not deployed.
::

## Configuration Components

### Project Name

The Project Name is a crucial identifier that:
- Links your store to its cloud resources
- Controls Docker image pushing
- Determines deployment triggers

::warning Project Name Importance
An incorrect Project Name will prevent deployment execution. Always ensure it matches the project name in your Alokai Console.
::

Example configuration:
```json
{
  "stores": {
    "fashion-brand": {
      "projectName": "fashion-brand-prod",  // Must match console project name
      // ... other settings
    }
  }
}
```

### Region Setting

The Region setting determines:
- Where your store will be deployed
- Which cloud resources will be used
- Data residency compliance

::warning Region Required
Deployment cannot be triggered without a valid region configuration. Ensure you select a region that complies with your data residency requirements.
::

Example region configuration:
```json
{
  "stores": {
    "fashion-brand": {
      "region": "us-east-1",  // AWS region identifier
      // ... other settings
    }
  }
}
```

### Framework Selection

The Framework setting defines whether a store uses Next.js or Nuxt. Alokai supports both frameworks out of the box through two base applications:
- `apps/storefront-unified-nextjs` for Next.js stores
- `apps/storefront-unified-nuxt` for Nuxt stores

Each store in `alokai.config.json` must specify which framework it will use for deployment:

```json
{
  "stores": {
    "fashion-brand": {
      "framework": "next",  // This store will deploy using Next.js
      // ... other settings
    },
    "sports-brand": {
      "framework": "nuxt",  // This store will deploy using Nuxt
      // ... other settings
    }
  }
}
```

Your project structure can support both frameworks simultaneously. For example:
```bash
apps/
├── storefront-unified-nextjs/     # Base Next.js implementation
├── storefront-unified-nuxt/       # Base Nuxt implementation
└── stores/
    ├── fashion-brand/            
    │   ├── storefront-unified-nextjs/  # Next.js Storefront
    └── sports-brand/
        └── storefront-unified-nuxt/    # Nuxt Storefront
```

This dual-framework support is particularly beneficial when:
- Different teams specialize in different frameworks
- You're migrating from one framework to another
- Specific stores have requirements better suited to a particular framework

::warning Framework Selection
The framework specified in `alokai.config.json` determines which version of your store will be built and deployed. Choose the framework that best suits your team's expertise and project requirements.
::

## Local Test Deployments

::warning Security Considerations
Local deployments come with significant security risks and should be used with caution. Cloud credentials could be exposed to malicious software, there is a risk of deploying incorrect project versions, and there is potential for accidental deployments.

We recommend using GitHub Workflows for production deployments as they provide better credentials security, a controlled deployment environment, version control integration, and automated validation checks.
::

::tip Best Practice
For production deployments, we strongly recommend using GitHub Workflows or similar CI/CD systems, implementing proper access controls, setting up deployment approval processes, and conducting regular security audits of deployment procedures.
::

If you need to perform a local deployment for testing purposes, you can use the CLI:

```bash
yarn store deploy --store-id=fashion-brand \
  --cloud-username=your_username \
  --cloud-password=your_password \
  --docker-registry-url=registry.vuestorefront.cloud
```

::danger Credential Security
Never commit credentials to version control, share credentials with unauthorized team members, store credentials in unsecured environment files, or use production credentials for local testing.

Use environment variables when possible, and consider creating separate test credentials:
```bash
export CLI_CLOUD_USERNAME=your_username
export CLI_CLOUD_PASSWORD=your_password
```
::

### Prerequisites for Local Deployment

1. **Cloud Credentials**
   - Request test credentials from your system administrator
   - Use separate credentials for local testing
   - Set up environment variables or provide them via CLI flags:
     - `CLI_CLOUD_USERNAME` or `--cloud-username`
     - `CLI_CLOUD_PASSWORD` or `--cloud-password`

2. **Docker Registry**
   - Default registry: `registry.vuestorefront.cloud`
   - Can be customized using `--docker-registry-url` flag

3. **Configuration Verification**
   - Double-check `alokai.config.json` configuration
   - Verify Project Name matches intended deployment target
   - Confirm Region selection is appropriate for testing

### Deployment Options

You can deploy:
- A single store: `--store-id=store-name`
- Multiple stores: `--store-id=store1 --store-id=store2`
- All stores: `--all`

For detailed deployment logs, use the `--verbose` flag:
```bash
yarn store deploy --store-id=fashion-brand --verbose
```

## Deployment Process

When you trigger a deployment, the following steps occur:

1. **Configuration Validation**
   - Verifies `alokai.config.json` settings
   - Checks credentials and permissions
   - Validates store configuration

2. **Build Process**
   - Compiles store assets
   - Applies inheritance rules
   - Creates deployment package

3. **Deployment Execution**
   - Pushes Docker images
   - Updates cloud resources
   - Configures CDN settings

4. **Verification**
   - Runs health checks
   - Verifies DNS configuration
   - Confirms deployment success

::tip Deployment Monitoring
Monitor deployment progress in the Alokai Console for detailed status and logs.
::

## Best Practices

1. **Configuration Management**
   - Keep `alokai.config.json` in version control
   - Document configuration changes
   - Use consistent naming conventions

2. **Security**
   - Use environment variables for sensitive data
   - Rotate access credentials regularly
   - Implement least-privilege access

3. **Testing**
   - Test deployments in staging environment
   - Verify configuration before production deployment
   - Maintain deployment documentation

::card{title="Next: Deployment - Configuration" icon="tabler:number-3-small" }

#description
Learn how to configure your deployment settings and manage multiple environments.

#cta
:::docs-button{to="/guides/multistore/tooling-and-concepts/configuration"}
Next
:::
::